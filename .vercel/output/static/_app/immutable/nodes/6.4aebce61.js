import{r as ue,e as A}from"../chunks/index.c7d36aa9.js";import{s as fe,f as y,a as T,g as C,r as L,c as U,h as R,d as E,j as b,i as B,u as _,E as z,v as H,G as he,w as Y,F as re,H as Q,l as se,m as oe,n as ie}from"../chunks/scheduler.7b5d904e.js";import{S as ce,i as _e}from"../chunks/index.895568c3.js";const me=async({parent:a})=>{const{supabase:t,session:r}=await a();if(!r)throw ue(303,"/login");const{data:s,error:i}=await t.from("Users").select("*");return{usersData:s}},ye=Object.freeze(Object.defineProperty({__proto__:null,load:me},Symbol.toStringTag,{value:"Module"}));function Z(a,t,r){const s=a.slice();return s[12]=t[r],s}function $(a,t,r){const s=a.slice();return s[15]=t[r],s}function ee(a,t,r){const s=a.slice();return s[18]=t[r],s}function te(a){let t,r,s,i=A(Object.keys(a[0][0])),l=[];for(let e=0;e<i.length;e+=1)l[e]=le(ee(a,i,e));let g=A(a[0]),o=[];for(let e=0;e<g.length;e+=1)o[e]=ae(Z(a,g,e));return{c(){t=y("table"),r=y("tr");for(let e=0;e<l.length;e+=1)l[e].c();s=T();for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=C(e,"TABLE",{class:!0});var p=R(t);r=C(p,"TR",{class:!0});var n=R(r);for(let d=0;d<l.length;d+=1)l[d].l(n);n.forEach(E),s=U(p);for(let d=0;d<o.length;d+=1)o[d].l(p);p.forEach(E),this.h()},h(){b(r,"class","svelte-15fy2kz"),b(t,"class","svelte-15fy2kz")},m(e,p){B(e,t,p),_(t,r);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(r,null);_(t,s);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(t,null)},p(e,p){if(p&1){i=A(Object.keys(e[0][0]));let n;for(n=0;n<i.length;n+=1){const d=ee(e,i,n);l[n]?l[n].p(d,p):(l[n]=le(d),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}if(p&5){g=A(e[0]);let n;for(n=0;n<g.length;n+=1){const d=Z(e,g,n);o[n]?o[n].p(d,p):(o[n]=ae(d),o[n].c(),o[n].m(t,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=g.length}},d(e){e&&E(t),Q(l,e),Q(o,e)}}}function le(a){let t,r=a[18]+"",s;return{c(){t=y("th"),s=se(r),this.h()},l(i){t=C(i,"TH",{class:!0});var l=R(t);s=oe(l,r),l.forEach(E),this.h()},h(){b(t,"class","svelte-15fy2kz")},m(i,l){B(i,t,l),_(t,s)},p(i,l){l&1&&r!==(r=i[18]+"")&&ie(s,r)},d(i){i&&E(t)}}}function ne(a){let t,r=a[15]+"",s;return{c(){t=y("td"),s=se(r),this.h()},l(i){t=C(i,"TD",{class:!0});var l=R(t);s=oe(l,r),l.forEach(E),this.h()},h(){b(t,"class","svelte-15fy2kz")},m(i,l){B(i,t,l),_(t,s)},p(i,l){l&1&&r!==(r=i[15]+"")&&ie(s,r)},d(i){i&&E(t)}}}function ae(a){let t,r,s,i='<i class="fa fa-trash-o"></i>',l,g,o="Events",e,p,n,d=A(Object.values(a[12])),h=[];for(let u=0;u<d.length;u+=1)h[u]=ne($(a,d,u));function O(...u){return a[5](a[12],...u)}function x(){return a[6](a[12])}return{c(){t=y("tr");for(let u=0;u<h.length;u+=1)h[u].c();r=T(),s=y("button"),s.innerHTML=i,l=T(),g=y("button"),g.textContent=o,e=T(),this.h()},l(u){t=C(u,"TR",{class:!0});var v=R(t);for(let m=0;m<h.length;m+=1)h[m].l(v);r=U(v),s=C(v,"BUTTON",{"data-svelte-h":!0}),L(s)!=="svelte-iv4cv3"&&(s.innerHTML=i),l=U(v),g=C(v,"BUTTON",{"data-svelte-h":!0}),L(g)!=="svelte-1gqce0g"&&(g.textContent=o),e=U(v),v.forEach(E),this.h()},h(){b(t,"class","svelte-15fy2kz")},m(u,v){B(u,t,v);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(t,null);_(t,r),_(t,s),_(t,l),_(t,g),_(t,e),p||(n=[H(s,"click",O,{once:!0}),H(g,"click",x)],p=!0)},p(u,v){if(a=u,v&1){d=A(Object.values(a[12]));let m;for(m=0;m<d.length;m+=1){const q=$(a,d,m);h[m]?h[m].p(q,v):(h[m]=ne(q),h[m].c(),h[m].m(t,r))}for(;m<h.length;m+=1)h[m].d(1);h.length=d.length}},d(u){u&&E(t),Q(h,u),p=!1,re(n)}}}function de(a){let t,r="Users:",s,i,l,g="Add User:",o,e,p,n="First Name:",d,h,O,x,u,v,m="Last Name:",q,w,D,M,S,P,V="Phone:",F,N,I,G,J,j,W="Create",K,X,k=a[0]&&a[0].length>0&&te(a);return{c(){t=y("h1"),t.textContent=r,s=T(),k&&k.c(),i=T(),l=y("h3"),l.textContent=g,o=T(),e=y("form"),p=y("label"),p.textContent=n,d=T(),h=y("input"),O=T(),x=y("br"),u=T(),v=y("label"),v.textContent=m,q=T(),w=y("input"),D=T(),M=y("br"),S=T(),P=y("label"),P.textContent=V,F=T(),N=y("input"),I=T(),G=y("br"),J=T(),j=y("button"),j.textContent=W,this.h()},l(c){t=C(c,"H1",{"data-svelte-h":!0}),L(t)!=="svelte-1b7nu2m"&&(t.textContent=r),s=U(c),k&&k.l(c),i=U(c),l=C(c,"H3",{"data-svelte-h":!0}),L(l)!=="svelte-qbgcoi"&&(l.textContent=g),o=U(c),e=C(c,"FORM",{});var f=R(e);p=C(f,"LABEL",{for:!0,"data-svelte-h":!0}),L(p)!=="svelte-1097oef"&&(p.textContent=n),d=U(f),h=C(f,"INPUT",{id:!0,type:!0,placeholder:!0}),O=U(f),x=C(f,"BR",{}),u=U(f),v=C(f,"LABEL",{for:!0,"data-svelte-h":!0}),L(v)!=="svelte-seix3f"&&(v.textContent=m),q=U(f),w=C(f,"INPUT",{id:!0,type:!0,placeholder:!0}),D=U(f),M=C(f,"BR",{}),S=U(f),P=C(f,"LABEL",{for:!0,"data-svelte-h":!0}),L(P)!=="svelte-11y9508"&&(P.textContent=V),F=U(f),N=C(f,"INPUT",{id:!0,type:!0,placeholder:!0,minlength:!0,maxlength:!0,pattern:!0,title:!0}),I=U(f),G=C(f,"BR",{}),J=U(f),j=C(f,"BUTTON",{type:!0,"data-svelte-h":!0}),L(j)!=="svelte-357n1v"&&(j.textContent=W),f.forEach(E),this.h()},h(){b(p,"for","first-name"),b(h,"id","first-name"),b(h,"type","text"),b(h,"placeholder","Jhon"),h.required=!0,b(v,"for","last-name"),b(w,"id","last-name"),b(w,"type","text"),b(w,"placeholder","Doe"),w.required=!0,b(P,"for","phone"),b(N,"id","phone"),b(N,"type","telfe"),b(N,"placeholder","987654321"),b(N,"minlength","9"),b(N,"maxlength","9"),b(N,"pattern","[0-9]{9}"),b(N,"title","9 numbers without spaces"),N.required=!0,b(j,"type","submit")},m(c,f){B(c,t,f),B(c,s,f),k&&k.m(c,f),B(c,i,f),B(c,l,f),B(c,o,f),B(c,e,f),_(e,p),_(e,d),_(e,h),z(h,a[1].first_name),_(e,O),_(e,x),_(e,u),_(e,v),_(e,q),_(e,w),z(w,a[1].last_name),_(e,D),_(e,M),_(e,S),_(e,P),_(e,F),_(e,N),z(N,a[1].phone),_(e,I),_(e,G),_(e,J),_(e,j),K||(X=[H(h,"input",a[7]),H(w,"input",a[8]),H(N,"input",a[9]),H(e,"submit",he(a[3]))],K=!0)},p(c,[f]){c[0]&&c[0].length>0?k?k.p(c,f):(k=te(c),k.c(),k.m(i.parentNode,i)):k&&(k.d(1),k=null),f&2&&h.value!==c[1].first_name&&z(h,c[1].first_name),f&2&&w.value!==c[1].last_name&&z(w,c[1].last_name),f&2&&z(N,c[1].phone)},i:Y,o:Y,d(c){c&&(E(t),E(s),E(i),E(l),E(o),E(e)),k&&k.d(c),K=!1,re(X)}}}function pe(a,t,r){let{data:s}=t,{usersData:i,supabase:l}=s;const g={first_name:null,last_name:null,phone:null};let o=g;const e=async(u,v)=>{if(!confirm(`Are you sure you want to delete user ${u}?
This action cannot be undone`))return;const{error:m}=await l.from("Users").delete().eq("id",v);m?alert(m.message):(alert("User deleted successfully"),location.reload())},p=async()=>{if(!o.first_name||!o.last_name||!o.phone){alert("Please fill all fields");return}if(o.phone.length!==9){alert("Phone must have 9 numbers");return}if(isNaN(Number(o.phone))){alert("Phone must be a number");return}const{error:u}=await l.from("Users").insert({first_name:o.first_name,last_name:o.last_name,phone_number:o.phone});u?alert(u.message):(r(1,o=g),alert("User created"),location.reload())},n=(u,v)=>e(u.first_name,u.id),d=u=>{window.location.href=`/users/${u.id}`};function h(){o.first_name=this.value,r(1,o)}function O(){o.last_name=this.value,r(1,o)}function x(){o.phone=this.value,r(1,o)}return a.$$set=u=>{"data"in u&&r(4,s=u.data)},a.$$.update=()=>{a.$$.dirty&16&&r(0,{usersData:i}=s,i)},[i,o,e,p,s,n,d,h,O,x]}class Ce extends ce{constructor(t){super(),_e(this,t,pe,de,fe,{data:4})}}export{Ce as component,ye as universal};
