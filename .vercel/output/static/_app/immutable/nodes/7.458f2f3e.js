import{r as Se,e as X}from"../chunks/index.c7d36aa9.js";import{s as Ae,f as c,a as b,g as f,r as x,c as g,h as R,d as k,j as y,E as w,I as Be,i as L,u,J as ke,v as K,G as ze,w as Te,F as Ue,H as ie,l as Ie,m as je,n as qe,K as De}from"../chunks/scheduler.7b5d904e.js";import{S as He,i as Me}from"../chunks/index.895568c3.js";const Re=async({parent:n,params:t})=>{const{supabase:s,session:r}=await n();if(!r)throw Se(303,"/login");const _=t.user_id,{data:l,error:E}=await s.from("Events").select("*").eq("user_id",_);return{eventsData:l,user_id:_}},Ve=Object.freeze(Object.defineProperty({__proto__:null,load:Re},Symbol.toStringTag,{value:"Module"}));function xe(n,t,s){const r=n.slice();return r[16]=t[s],r}function Ee(n,t,s){const r=n.slice();return r[19]=t[s],r}function Oe(n,t,s){const r=n.slice();return r[22]=t[s],r}function we(n){let t,s,r,_=X(Object.keys(n[0][0])),l=[];for(let e=0;e<_.length;e+=1)l[e]=Ne(Oe(n,_,e));let E=X(n[0]),v=[];for(let e=0;e<E.length;e+=1)v[e]=Pe(xe(n,E,e));return{c(){t=c("table"),s=c("tr");for(let e=0;e<l.length;e+=1)l[e].c();r=b();for(let e=0;e<v.length;e+=1)v[e].c();this.h()},l(e){t=f(e,"TABLE",{class:!0});var i=R(t);s=f(i,"TR",{class:!0});var a=R(s);for(let d=0;d<l.length;d+=1)l[d].l(a);a.forEach(k),r=g(i);for(let d=0;d<v.length;d+=1)v[d].l(i);i.forEach(k),this.h()},h(){y(s,"class","svelte-15fy2kz"),y(t,"class","svelte-15fy2kz")},m(e,i){L(e,t,i),u(t,s);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(s,null);u(t,r);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(t,null)},p(e,i){if(i&1){_=X(Object.keys(e[0][0]));let a;for(a=0;a<_.length;a+=1){const d=Oe(e,_,a);l[a]?l[a].p(d,i):(l[a]=Ne(d),l[a].c(),l[a].m(s,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=_.length}if(i&5){E=X(e[0]);let a;for(a=0;a<E.length;a+=1){const d=xe(e,E,a);v[a]?v[a].p(d,i):(v[a]=Pe(d),v[a].c(),v[a].m(t,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=E.length}},d(e){e&&k(t),ie(l,e),ie(v,e)}}}function Ne(n){let t,s=n[22]+"",r;return{c(){t=c("th"),r=Ie(s),this.h()},l(_){t=f(_,"TH",{class:!0});var l=R(t);r=je(l,s),l.forEach(k),this.h()},h(){y(t,"class","svelte-15fy2kz")},m(_,l){L(_,t,l),u(t,r)},p(_,l){l&1&&s!==(s=_[22]+"")&&qe(r,s)},d(_){_&&k(t)}}}function Le(n){let t,s=n[19]+"",r;return{c(){t=c("td"),r=Ie(s),this.h()},l(_){t=f(_,"TD",{class:!0});var l=R(t);r=je(l,s),l.forEach(k),this.h()},h(){y(t,"class","svelte-15fy2kz")},m(_,l){L(_,t,l),u(t,r)},p(_,l){l&1&&s!==(s=_[19]+"")&&qe(r,s)},d(_){_&&k(t)}}}function Pe(n){let t,s,r,_='<i class="fa fa-trash-o"></i>',l,E,v,e=X(Object.values(n[16])),i=[];for(let d=0;d<e.length;d+=1)i[d]=Le(Ee(n,e,d));function a(){return n[5](n[16])}return{c(){t=c("tr");for(let d=0;d<i.length;d+=1)i[d].c();s=b(),r=c("button"),r.innerHTML=_,l=b(),this.h()},l(d){t=f(d,"TR",{class:!0});var m=R(t);for(let p=0;p<i.length;p+=1)i[p].l(m);s=g(m),r=f(m,"BUTTON",{"data-svelte-h":!0}),x(r)!=="svelte-qnz2u2"&&(r.innerHTML=_),l=g(m),m.forEach(k),this.h()},h(){y(t,"class","svelte-15fy2kz")},m(d,m){L(d,t,m);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(t,null);u(t,s),u(t,r),u(t,l),E||(v=K(r,"click",a,{once:!0}),E=!0)},p(d,m){if(n=d,m&1){e=X(Object.values(n[16]));let p;for(p=0;p<e.length;p+=1){const M=Ee(n,e,p);i[p]?i[p].p(M,m):(i[p]=Le(M),i[p].c(),i[p].m(t,s))}for(;p<i.length;p+=1)i[p].d(1);i.length=e.length}},d(d){d&&k(t),ie(i,d),E=!1,v()}}}function Fe(n){let t,s="Events:",r,_,l,E="Add User:",v,e,i,a="Name:",d,m,p,M,Q,P,ee="Description:",Y,C,Z,$,V,F,ue="Start:",te,I,le,W,_e="End:",ne,j,ae,G,de="Week Day:",se,T,N,ce="Select",q,fe="Monday",S,he="Tuesday",A,ve="Wednesday",B,pe="Thursday",z,me="Friday",U,Ce="Saturday",D,ye="Sunday",re,J,be="Create",oe,ge,O=n[0]&&n[0].length>0&&we(n);return{c(){t=c("h1"),t.textContent=s,r=b(),O&&O.c(),_=b(),l=c("h3"),l.textContent=E,v=b(),e=c("form"),i=c("label"),i.textContent=a,d=b(),m=c("input"),p=b(),M=c("br"),Q=b(),P=c("label"),P.textContent=ee,Y=b(),C=c("textarea"),Z=b(),$=c("br"),V=b(),F=c("label"),F.textContent=ue,te=b(),I=c("input"),le=b(),W=c("label"),W.textContent=_e,ne=b(),j=c("input"),ae=b(),G=c("label"),G.textContent=de,se=b(),T=c("select"),N=c("option"),N.textContent=ce,q=c("option"),q.textContent=fe,S=c("option"),S.textContent=he,A=c("option"),A.textContent=ve,B=c("option"),B.textContent=pe,z=c("option"),z.textContent=me,U=c("option"),U.textContent=Ce,D=c("option"),D.textContent=ye,re=b(),J=c("button"),J.textContent=be,this.h()},l(h){t=f(h,"H1",{"data-svelte-h":!0}),x(t)!=="svelte-113i1ud"&&(t.textContent=s),r=g(h),O&&O.l(h),_=g(h),l=f(h,"H3",{"data-svelte-h":!0}),x(l)!=="svelte-qbgcoi"&&(l.textContent=E),v=g(h),e=f(h,"FORM",{});var o=R(e);i=f(o,"LABEL",{for:!0,"data-svelte-h":!0}),x(i)!=="svelte-ir8c70"&&(i.textContent=a),d=g(o),m=f(o,"INPUT",{id:!0,type:!0,placeholder:!0}),p=g(o),M=f(o,"BR",{}),Q=g(o),P=f(o,"LABEL",{for:!0,"data-svelte-h":!0}),x(P)!=="svelte-1jjlhqk"&&(P.textContent=ee),Y=g(o),C=f(o,"TEXTAREA",{id:!0}),R(C).forEach(k),Z=g(o),$=f(o,"BR",{}),V=g(o),F=f(o,"LABEL",{for:!0,"data-svelte-h":!0}),x(F)!=="svelte-fq4ed2"&&(F.textContent=ue),te=g(o),I=f(o,"INPUT",{id:!0,type:!0}),le=g(o),W=f(o,"LABEL",{for:!0,"data-svelte-h":!0}),x(W)!=="svelte-b1gj4e"&&(W.textContent=_e),ne=g(o),j=f(o,"INPUT",{id:!0,type:!0}),ae=g(o),G=f(o,"LABEL",{for:!0,"data-svelte-h":!0}),x(G)!=="svelte-hfwph1"&&(G.textContent=de),se=g(o),T=f(o,"SELECT",{id:!0});var H=R(T);N=f(H,"OPTION",{"data-svelte-h":!0}),x(N)!=="svelte-1eahvcv"&&(N.textContent=ce),q=f(H,"OPTION",{"data-svelte-h":!0}),x(q)!=="svelte-p2cqpn"&&(q.textContent=fe),S=f(H,"OPTION",{"data-svelte-h":!0}),x(S)!=="svelte-1j4gv89"&&(S.textContent=he),A=f(H,"OPTION",{"data-svelte-h":!0}),x(A)!=="svelte-1075f2z"&&(A.textContent=ve),B=f(H,"OPTION",{"data-svelte-h":!0}),x(B)!=="svelte-7u8426"&&(B.textContent=pe),z=f(H,"OPTION",{"data-svelte-h":!0}),x(z)!=="svelte-1x31ayg"&&(z.textContent=me),U=f(H,"OPTION",{"data-svelte-h":!0}),x(U)!=="svelte-c0bgu9"&&(U.textContent=Ce),D=f(H,"OPTION",{"data-svelte-h":!0}),x(D)!=="svelte-1vt9v6l"&&(D.textContent=ye),H.forEach(k),re=g(o),J=f(o,"BUTTON",{type:!0,"data-svelte-h":!0}),x(J)!=="svelte-357n1v"&&(J.textContent=be),o.forEach(k),this.h()},h(){y(i,"for","name"),y(m,"id","name"),y(m,"type","text"),y(m,"placeholder","Eat"),m.required=!0,y(P,"for","description"),y(C,"id","description"),y(F,"for","start-time"),y(I,"id","start-time"),y(I,"type","time"),I.required=!0,y(W,"for","end-time"),y(j,"id","end-time"),y(j,"type","time"),j.required=!0,y(G,"for","week-day"),N.__value="",w(N,N.__value),N.disabled=!0,N.selected=!0,q.__value="1",w(q,q.__value),S.__value="2",w(S,S.__value),A.__value="3",w(A,A.__value),B.__value="4",w(B,B.__value),z.__value="5",w(z,z.__value),U.__value="6",w(U,U.__value),D.__value="7",w(D,D.__value),y(T,"id","week-day"),n[1].week_day===void 0&&Be(()=>n[10].call(T)),y(J,"type","submit")},m(h,o){L(h,t,o),L(h,r,o),O&&O.m(h,o),L(h,_,o),L(h,l,o),L(h,v,o),L(h,e,o),u(e,i),u(e,d),u(e,m),w(m,n[1].name),u(e,p),u(e,M),u(e,Q),u(e,P),u(e,Y),u(e,C),w(C,n[1].description),u(e,Z),u(e,$),u(e,V),u(e,F),u(e,te),u(e,I),w(I,n[1].start),u(e,le),u(e,W),u(e,ne),u(e,j),w(j,n[1].end),u(e,ae),u(e,G),u(e,se),u(e,T),u(T,N),u(T,q),u(T,S),u(T,A),u(T,B),u(T,z),u(T,U),u(T,D),ke(T,n[1].week_day,!0),u(e,re),u(e,J),oe||(ge=[K(m,"input",n[6]),K(C,"input",n[7]),K(I,"input",n[8]),K(j,"input",n[9]),K(T,"change",n[10]),K(e,"submit",ze(n[3]))],oe=!0)},p(h,[o]){h[0]&&h[0].length>0?O?O.p(h,o):(O=we(h),O.c(),O.m(_.parentNode,_)):O&&(O.d(1),O=null),o&2&&m.value!==h[1].name&&w(m,h[1].name),o&2&&w(C,h[1].description),o&2&&w(I,h[1].start),o&2&&w(j,h[1].end),o&2&&ke(T,h[1].week_day)},i:Te,o:Te,d(h){h&&(k(t),k(r),k(_),k(l),k(v),k(e)),O&&O.d(h),oe=!1,Ue(ge)}}}function We(n,t,s){let{data:r}=t,{eventsData:_,supabase:l,user_id:E}=r;const v={name:null,description:"",start:null,end:null,week_day:null};let e=v;const i=C=>/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(C),a=C=>{switch(C){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday";default:return"Unknown"}},d=async(C,Z,$)=>{if(!confirm(`Are you sure you want to delete event ${a(C)} - ${Z}?
This action cannot be undone`))return;const{error:V}=await l.from("Events").delete().eq("id",$);V?alert(V.message):(alert("Event deleted successfully"),location.reload())},m=async()=>{if(!e.name||!e.start||!e.end||!e.week_day){alert("Please fill all fields");return}if(!i(e.start)||!i(e.end)){alert("Invalid time");return}const{error:C}=await l.from("Events").insert({user_id:E,name:e.name,description:e.description,start:e.start,end:e.end,week_day:e.week_day});C?alert(C.message):(s(1,e=v),alert("Event created"),location.reload())},p=C=>d(C.week_day,C.name,C.id);function M(){e.name=this.value,s(1,e)}function Q(){e.description=this.value,s(1,e)}function P(){e.start=this.value,s(1,e)}function ee(){e.end=this.value,s(1,e)}function Y(){e.week_day=De(this),s(1,e)}return n.$$set=C=>{"data"in C&&s(4,r=C.data)},n.$$.update=()=>{n.$$.dirty&16&&s(0,{eventsData:_}=r,_)},[_,e,d,m,r,p,M,Q,P,ee,Y]}class Xe extends He{constructor(t){super(),Me(this,t,We,Fe,Ae,{data:4})}}export{Xe as component,Ve as universal};
